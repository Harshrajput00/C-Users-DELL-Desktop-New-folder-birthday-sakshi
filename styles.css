:root{
  --pink:#ff7aa2;
  --deep:#3b0b3b;
  --accent:#ffd6e0;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0}
body{
  font-family:Inter,system-ui,Segoe UI,Arial;overflow:hidden;
  background:linear-gradient(180deg,#ffeff6 0%, #fff 40%);
  display:flex;align-items:center;justify-content:center;padding:10px;
  width:100%;
  height:100vh;
}

/* Diary Styles */
.diary-container{
  width:100%;
  max-width:900px;
  min-height:500px;
  max-height:95vh;
  position:relative;
  perspective:1200px;
  display:flex;
  flex-direction:column;
  justify-content:flex-start;
  padding:0 10px;
}

.diary-page{
  position:absolute;
  width:100%;
  max-width:900px;
  height:500px;
  max-height:80vh;
  background:#fff;
  border-radius:8px;
  box-shadow:0 20px 60px rgba(0,0,0,0.15);
  transform-origin:left center;
  transform:rotateY(90deg);
  transition:transform 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55), opacity 0.8s ease;
  opacity:0;
  pointer-events:none;
  z-index:10;
  left:50%;
  margin-left:-50%;
}

.diary-page.active{
  transform:rotateY(0deg);opacity:1;pointer-events:auto;z-index:20
}

.diary-page.prev{
  transform:rotateY(-90deg);opacity:0
}

.page-inner{
  width:100%;
  height:100%;
  display:flex;
  flex-direction:column;
  padding:25px;
  box-sizing:border-box;
  overflow-y:auto;
  overflow-x:hidden;
  background:linear-gradient(135deg,#fff 0%, #fff9fc 100%);
}

.page-content{
  display:flex;flex-direction:column;height:100%;justify-content:center;align-items:center;text-align:center
}

/* Cover Page Styles */
.cover-inner{
  background:linear-gradient(135deg,#fff5fa 0%,#fff 50%,#ffe8f0 100%);
  position:relative;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:20px 15px;
  min-height:500px;
}

.cover-decoration{
  position:absolute;
  font-size:clamp(24px, 6vw, 48px);
  opacity:0.6;
  animation:float 3s ease-in-out infinite;
  max-width:60px;
  max-height:60px;
}

.cover-decoration.top-left{top:15px;left:15px;animation-delay:0s}
.cover-decoration.top-right{top:15px;right:15px;animation-delay:0.5s}
.cover-decoration.bottom-left{bottom:15px;left:15px;animation-delay:1s}
.cover-decoration.bottom-right{bottom:15px;right:15px;animation-delay:1.5s}

@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}

.cover-content{
  text-align:center;
  z-index:2;
  position:relative;
  padding:0 10px;
}

.cover-icon{
  font-size:clamp(48px, 15vw, 72px);
  margin-bottom:15px;
  animation:spin 6s linear infinite;
  display:block;
}

@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}

.cover-title{
  font-size:clamp(28px, 8vw, 42px);
  font-weight:900;
  color:var(--deep);
  margin:0 0 8px;
  letter-spacing:1px;
  word-wrap:break-word;
}

.cover-subtitle{
  font-size:clamp(14px, 3vw, 16px);
  color:#888;
  margin:0 0 20px;
  font-style:italic;
  word-wrap:break-word;
}

.cover-heart{
  font-size:clamp(48px, 12vw, 64px);
  margin:15px 0;
  animation:heartbeat 1.2s ease-in-out infinite;
  display:block;
}

@keyframes heartbeat{0%,100%{transform:scale(1)}50%{transform:scale(1.2)}}

.cover-names p{
  font-size:clamp(12px, 2.5vw, 14px);
  color:#666;
  margin:0;
  font-weight:600;
  letter-spacing:0.5px;
  word-wrap:break-word;
}

.cover-names h2{
  font-size:clamp(32px, 10vw, 52px);
  color:var(--pink);
  margin:4px 0 15px;
  font-weight:900;
  letter-spacing:2px;
  word-wrap:break-word;
}

.cover-date{
  font-size:clamp(11px, 2vw, 13px);
  color:#999;
  margin:0;
  font-weight:500;
  word-wrap:break-word;
}

.cover-divider{
  width:60px;
  height:2px;
  background:linear-gradient(90deg,transparent,var(--pink),transparent);
  margin:15px 0;
}

.cover-message{
  font-size:clamp(12px, 2.5vw, 14px);
  color:var(--pink);
  margin:0;
  font-style:italic;
  font-weight:600;
  letter-spacing:0.5px;
  word-wrap:break-word;
}

.cover-nav-button{
  margin-top:20px;
}

.diary-page.memory-page .page-inner{
  display:grid;
  grid-template-columns:1fr;
  gap:15px;
  align-items:stretch;
  justify-items:stretch;
  padding:15px;
  box-sizing:border-box;
}

/* Direct memory page children to ensure text covers right side */
.diary-page.memory-page .image-side{
  display:flex;
  align-items:center;
  justify-content:center;
  height:auto;
  width:100%;
  min-height:200px;
  overflow:hidden;
}

.diary-page.memory-page .image-side img{
  width:100%;
  height:auto;
  max-height:300px;
  object-fit:cover;
  border-radius:12px;
  box-shadow:0 15px 40px rgba(255,122,162,0.2);
  animation:imagePulse 0.8s ease-out,imageGlow 3s ease-in-out infinite;
  transform:scale(0.95);
}

.diary-page.memory-page .text-side{
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:flex-start;
  text-align:left;
  padding:10px;
  gap:10px;
  height:auto;
  width:100%;
  animation:slideInText 0.6s ease-out;
  overflow:visible;
}

.diary-page.memory-page .text-side p{
  font-size:clamp(13px, 3.5vw, 18px);
  line-height:1.6;
  color:#5a2d4a;
  margin:0;
  font-weight:500;
  width:100%;
  word-wrap:break-word;
  animation:textFadeIn 1s ease-out;
}

.diary-page.memory-page .emoji-float{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  align-items:center;
  opacity:0.9;
  margin-top:5px;
}

.diary-page.memory-page .emoji-float span{
  font-size:clamp(16px, 4vw, 20px);
  animation:floatEmoji 3.4s ease-in-out infinite;
  display:inline-block;
}

.diary-page.memory-page .emoji-float span:nth-child(2){animation-delay:0.3s}
.diary-page.memory-page .emoji-float span:nth-child(3){animation-delay:0.6s}
.diary-page.memory-page .emoji-float span:nth-child(4){animation-delay:0.9s}
.diary-page.memory-page .emoji-float span:nth-child(5){animation-delay:1.2s}

@keyframes floatEmoji{0%,100%{transform:translateY(0) scale(1)}50%{transform:translateY(-6px) scale(1.08)}}

@media (min-width:769px){
  .diary-page.memory-page .page-inner{
    grid-template-columns:1.1fr 0.9fr;
    gap:20px;
    padding:20px;
  }
  .diary-page.memory-page .image-side{
    min-height:auto;
  }
  .diary-page.memory-page .image-side img{
    height:100%;
    max-height:none;
  }
  .diary-page.memory-page .text-side{
    padding:15px;
  }
  .diary-page.memory-page .text-side p{
    font-size:18px;
  }
}

.memory-page{
  display:grid;
  grid-template-columns:1fr;
  gap:15px;
  align-items:center;
  width:100%;
  height:100%;
  padding:0;
}

.memory-page .image-side{
  display:flex;
  align-items:center;
  justify-content:center;
  height:auto;
  width:100%;
  min-height:200px;
}

.memory-page img{
  width:100%;
  height:auto;
  max-height:300px;
  object-fit:cover;
  border-radius:12px;
  box-shadow:0 15px 40px rgba(255,122,162,0.2);
  animation:imagePulse 0.8s ease-out,imageGlow 3s ease-in-out infinite;
  transform:scale(0.95);
}

@keyframes imagePulse{0%{transform:scale(0.9);opacity:0.8}100%{transform:scale(1);opacity:1}}
@keyframes imageGlow{0%,100%{box-shadow:0 15px 40px rgba(255,122,162,0.2)}50%{box-shadow:0 15px 50px rgba(255,122,162,0.35)}}

.memory-page .text-side{
  display:flex;
  flex-direction:column;
  justify-content:center;
  padding:15px;
  gap:10px;
  animation:slideInText 0.6s ease-out;
}

@keyframes slideInText{0%{opacity:0;transform:translateX(20px)}100%{opacity:1;transform:translateX(0)}}

.memory-page .text-side p{
  font-size:clamp(13px, 3.5vw, 18px);
  line-height:1.6;
  color:#5a2d4a;
  margin:0;
  font-weight:500;
  word-wrap:break-word;
  animation:textFadeIn 1s ease-out;
}

@keyframes textFadeIn{0%{opacity:0}100%{opacity:1}}

@media (min-width:769px){
  .memory-page{
    grid-template-columns:1.1fr 0.9fr;
    gap:25px;
  }
  .memory-page .image-side{
    min-height:auto;
    height:100%;
  }
  .memory-page img{
    height:100%;
    max-height:none;
  }
  .memory-page .text-side{
    padding:25px;
  }
  .memory-page .text-side p{
    font-size:18px;
  }
}

/* Diary Navigation */
.diary-nav{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
  margin-top:20px;
  padding:0 5px;
  position:relative;
  z-index:100;
  width:100%;
  flex-wrap:wrap;
}

.page-btn{
  background:var(--pink);
  border:none;
  color:#fff;
  padding:10px 15px;
  border-radius:8px;
  cursor:pointer;
  font-weight:600;
  transition:transform 0.2s;
  font-size:clamp(12px, 3vw, 16px);
  z-index:101;
  white-space:nowrap;
  flex:1;
  min-width:80px;
  max-width:200px;
}

.page-btn:hover{
  transform:translateY(-2px)
}

.page-btn:disabled{
  opacity:0.5;
  cursor:not-allowed
}

#page-counter{
  font-weight:700;
  color:var(--deep);
  font-size:clamp(11px, 2.5vw, 14px);
  white-space:nowrap;
  padding:0 5px;
}

@media (max-width:768px){
  .memory-page{grid-template-columns:1fr;gap:12px}
  .page-inner{padding:15px}
  .cover-text h2{font-size:28px}
  .memory-page .text-side p{font-size:14px}
  body{padding:5px}
  .diary-container{padding:0 5px}
  #nav-emoji-cluster{right:5px;bottom:15px}
}
.card{
  width:min(920px,96%);
  max-width:1100px;
  background:linear-gradient(180deg,rgba(255,255,255,0.9),#fff);
  border-radius:24px;
  box-shadow:0 10px 40px rgba(0,0,0,0.12);
  padding:15px;
  position:relative;
  overflow:hidden;
}

.card h1{
  font-size:clamp(22px, 6vw, 28px);
  margin:0 0 4px;
  color:var(--deep);
  display:flex;
  gap:8px;
  align-items:flex-end;
  flex-wrap:wrap;
}

#name{
  color:var(--pink);
  outline:none;
  border-bottom:2px dashed rgba(0,0,0,0.06);
  padding:2px 6px;
  border-radius:6px;
  font-size:inherit;
}

.typed{
  color:#6b2550;
  font-size:clamp(13px, 3vw, 15px);
  margin-bottom:10px;
  min-height:20px;
  word-wrap:break-word;
}

.controls{
  display:flex;
  gap:8px;
  margin-bottom:12px;
  flex-wrap:wrap;
}

.controls button{
  background:var(--pink);
  border:none;
  color:#fff;
  padding:10px 14px;
  border-radius:12px;
  cursor:pointer;
  font-weight:600;
  box-shadow:0 6px 18px rgba(255,122,162,0.16);
  font-size:clamp(12px, 2.5vw, 14px);
}

.controls button:hover{
  transform:translateY(-2px)
}

.stage{
  position:relative;
  height:auto;
  min-height:240px;
  max-height:300px;
  border-radius:12px;
  background:linear-gradient(180deg,#fff,#fff0);
  overflow:hidden;
}

/* Confetti pieces */
.confetti{
  position:fixed;
  width:8px;
  height:12px;
  opacity:0.95;
  border-radius:2px;
  will-change:transform,opacity;
  pointer-events:none;
  z-index:9998;
}

@keyframes confetti-fall{
  0%{
    transform:translateY(0) rotate(0) scale(1);
    opacity:1;
  }
  100%{
    transform:translateY(100vh) rotate(720deg) scale(0.5);
    opacity:0;
  }
}

/* Floating hearts */
.floating-heart{
  position:fixed;
  pointer-events:none;
  z-index:9998;
  font-size:clamp(14px, 4vw, 24px);
  max-width:50px;
}

/* Balloons */
.balloon{
  position:fixed;
  width:30px;
  height:40px;
  border-radius:50% 50% 50% 50%;
  transform-origin:center bottom;
}

.balloon::after{
  content:"";
  position:absolute;
  left:50%;
  bottom:-10px;
  width:2px;
  height:14px;
  background:#555;
  transform:translateX(-50%);
}

@keyframes floatUp{
  0%{transform:translateY(120%)}
  100%{transform:translateY(-140%)}
}

/* Cake & Candles */
.cake{
  position:relative;
  width:clamp(200px, 50vw, 260px);
  height:clamp(90px, 25vw, 120px);
  border-radius:14px 14px 8px 8px;
  display:flex;
  align-items:flex-end;
  justify-content:center;
  pointer-events:auto;
  z-index:40;
  margin:0 auto;
}

.cake .layer{
  width:100%;
  height:68%;
  background:linear-gradient(180deg,#7b4b30,#5c3423);
  border-radius:12px;
  position:relative;
  box-shadow:inset 0 -8px 18px rgba(0,0,0,0.18);
}

.cake .icing{
  position:absolute;
  left:6%;
  right:6%;
  top:-14px;
  height:34px;
  background:linear-gradient(180deg,#3b231f,#2a1512);
  border-radius:16px;
  box-shadow:0 6px 12px rgba(0,0,0,0.12);
}

.candles{
  position:absolute;
  left:50%;
  top:6px;
  transform:translateX(-50%);
  width:90%;
  display:flex;
  justify-content:space-between;
  gap:clamp(4px, 2vw, 8px);
}

.candle{
  width:clamp(10px, 3vw, 12px);
  height:clamp(28px, 8vw, 34px);
  border-radius:3px;
  background:linear-gradient(180deg,#fff,#ffd9e6);
  position:relative;
  cursor:pointer;
  display:flex;
  align-items:flex-start;
  justify-content:center;
  transition:all 0.3s;
}

.candle .flame{
  position:absolute;
  top:clamp(-8px, -2vw, -12px);
  font-size:clamp(12px, 3vw, 14px);
  filter:drop-shadow(0 2px 6px rgba(255,120,160,0.4));
  animation:flame-flicker 900ms infinite;
}

.candle.out .flame{
  opacity:0;
  transform:translateY(-6px) scale(0.6);
  transition:all 300ms ease;
}

.candle .wick{
  position:absolute;
  top:6px;
  width:2px;
  height:8px;
  background:#333;
  border-radius:1px;
}

@keyframes flame-flicker{
  0%{transform:translateY(0) scale(1)}
  50%{transform:translateY(-2px) scale(1.05)}
  100%{transform:translateY(0) scale(1)}
}

/* Cake message */
.cake-msg{
  position:absolute;
  left:50%;
  transform:translateX(-50%);
  top:calc(50% - 110px);
  background:linear-gradient(180deg,rgba(255,255,255,0.98),rgba(255,255,255,0.95));
  padding:8px 14px;
  border-radius:10px;
  color:#5a2d4a;
  font-weight:700;
  box-shadow:0 8px 24px rgba(0,0,0,0.08);
  z-index:45;
  font-size:clamp(11px, 2.5vw, 14px);
  word-wrap:break-word;
  max-width:90%;
}

.cake-msg.small{
  font-size:clamp(10px, 2vw, 14px);
  padding:6px 10px;
}

.cake-msg.big{
  font-size:clamp(14px, 3vw, 18px);
  padding:10px 16px;
}

/* Fullscreen blur overlay used during celebration */
.overlay-blur{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:42;
  backdrop-filter:blur(0px);
  transition:backdrop-filter .5s ease,background .5s ease;
}

.overlay-blur.active{
  backdrop-filter:blur(6px);
  background:rgba(0,0,0,0.18);
}

/* Big celebratory balloon */
.big-balloon{
  position:fixed;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%) scale(0.8);
  width:clamp(180px, 40vw, 260px);
  height:clamp(180px, 40vw, 320px);
  border-radius:50%/58% 58% 42% 42%;
  background:radial-gradient(circle at 35% 25%, #ffb3d1,#ff4da6 60%);
  display:flex;
  align-items:center;
  justify-content:center;
  color:#fff;
  font-weight:900;
  font-size:clamp(14px, 4vw, 20px);
  text-align:center;
  z-index:60;
  box-shadow:0 30px 80px rgba(0,0,0,0.35);
  padding:20px;
  word-wrap:break-word;
}

.big-balloon.pop{
  animation:balloon-pop .6s cubic-bezier(.2,.9,.2,1) forwards;
}

@keyframes balloon-pop{
  0%{transform:translate(-50%,-50%) scale(1);opacity:1}
  60%{transform:translate(-50%,-50%) scale(1.25)}
  100%{transform:translate(-50%,-50%) scale(0.18);opacity:0}
}

.celebration-text{
  position:fixed;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%) scale(0.95);
  z-index:70;
  color:#fff;
  font-weight:700;
  font-size:clamp(14px, 3.5vw, 20px);
  line-height:1.6;
  text-align:center;
  text-shadow:0 8px 24px rgba(0,0,0,0.45);
  opacity:0;
  transition:opacity .35s,transform .35s;
  max-width:90%;
  padding:clamp(15px, 5vw, 26px);
  background:linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
  border-radius:14px;
  word-wrap:break-word;
}

.celebration-text.show{
  opacity:1;
  transform:translate(-50%,-50%) scale(1);
}

/* Joyful balloons z-index above blur */
.joy-balloon{
  position:fixed;
  width:clamp(30px, 6vw, 46px);
  height:clamp(40px, 8vw, 60px);
  border-radius:50%;
  pointer-events:none;
  z-index:50;
  box-shadow:0 8px 20px rgba(0,0,0,0.18);
}


/* Modal */
.modal{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(10,10,10,0.35);
  padding:10px;
  z-index:9996;
}

.modal.hidden{
  display:none;
}

.modal-content{
  background:#fff;
  padding:15px;
  border-radius:12px;
  max-width:520px;
  width:92%;
  max-height:90vh;
  overflow-y:auto;
  box-shadow:0 20px 80px rgba(0,0,0,0.18);
  position:relative;
}

.modal-content h2{
  margin:0 0 12px;
  font-size:clamp(18px, 4vw, 22px);
  word-wrap:break-word;
}

.modal-content .close{
  position:absolute;
  top:10px;
  right:10px;
  background:transparent;
  border:none;
  font-size:18px;
  cursor:pointer;
}

.modal-controls{
  display:flex;
  gap:8px;
  justify-content:center;
  margin-top:12px;
  flex-wrap:wrap;
}

.modal-controls button{
  padding:8px 12px;
  border-radius:10px;
  border:none;
  background:var(--accent);
  cursor:pointer;
  font-size:clamp(11px, 2.5vw, 14px);
}

/* Slideshow styles */
.slideshow{
  max-width:900px;
  width:96%;
  padding:12px 14px;
}

.slide-area{
  display:flex;
  align-items:center;
  gap:8px;
  flex-wrap:wrap;
}

.slide-inner{
  width:100%;
  height:clamp(200px, 60vw, 380px);
  border-radius:12px;
  overflow:hidden;
  position:relative;
  background:#111;
}

.slide-inner .slide{
  position:absolute;
  inset:0;
  display:flex;
  align-items:flex-end;
  justify-content:flex-end;
  flex-direction:column;
  color:#fff;
  padding:15px;
  box-sizing:border-box;
  background-size:cover;
  background-position:center;
  background-repeat:no-repeat;
}

.slide-inner .caption{
  background:linear-gradient(180deg,rgba(0,0,0,0.0),rgba(0,0,0,0.5));
  width:100%;
  padding:clamp(10px, 2vw, 14px);
  border-top-left-radius:0;
  border-top-right-radius:0;
  margin-top:auto;
  font-size:clamp(12px, 2.5vw, 14px);
  word-wrap:break-word;
}

.slide-nav{
  background:transparent;
  border:none;
  color:var(--deep);
  font-size:clamp(24px, 6vw, 36px);
  cursor:pointer;
  padding:6px;
  flex:0 0 auto;
}

.slide-controls{
  display:flex;
  gap:8px;
  justify-content:center;
  margin-top:12px;
  flex-wrap:wrap;
}

.slide-controls button{
  padding:8px 12px;
  border-radius:8px;
  border:none;
  background:var(--pink);
  color:#fff;
  cursor:pointer;
  font-size:clamp(11px, 2.5vw, 14px);
}

.thumbs{
  display:flex;
  gap:8px;
  justify-content:center;
  margin-top:8px;
  flex-wrap:wrap;
}

.thumbs img{
  width:50px;
  height:40px;
  object-fit:cover;
  border-radius:8px;
  cursor:pointer;
  opacity:0.9;
}

/* Cake Page Styles */
.cake-inner{
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  gap:20px;
  padding:15px;
}

.blow-text{
  font-size:clamp(18px, 5vw, 28px);
  color:var(--deep);
  font-weight:700;
  text-align:center;
  animation:fadeIn 0.8s ease-out;
  word-wrap:break-word;
  padding:0 10px;
}

@keyframes fadeIn{0%{opacity:0;transform:translateY(-20px)}100%{opacity:1;transform:translateY(0)}}
@keyframes fadeOut{0%{opacity:1;transform:translateY(0)}100%{opacity:0;transform:translateY(-20px)}}

.cake-container{
  display:flex;
  justify-content:center;
  align-items:center;
  width:100%;
  min-height:200px;
}

/* Ensure cake centers exactly within the cake page */
.cake-inner .cake{
  position:relative !important;
  left: auto !important;
  top: auto !important;
  transform: none !important;
  animation:cakeBounce 2s ease-in-out infinite;
}

@keyframes cakeBounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}

.cake-layer{
  width:100%;
  height:100%;
  background:linear-gradient(180deg,#8B4513 0%,#A0522D 50%,#654321 100%);
  border-radius:16px;
  box-shadow:0 10px 30px rgba(0,0,0,0.3);
  position:relative;
  overflow:hidden;
}

.cake-frosting{
  position:absolute;
  top:-20px;
  left:5%;
  right:5%;
  height:40px;
  background:linear-gradient(180deg,#FFB6C1 0%,#FF69B4 100%);
  border-radius:50% 50% 0 0 / 100% 100% 0 0;
  box-shadow:inset 0 -4px 8px rgba(255,255,255,0.3);
}

/* Strawberries on cake */
.strawberries-holder{
  position:absolute;
  inset:0;
  pointer-events:none;
  z-index:12;
}

.strawberry{
  position:absolute;
  width:clamp(20px, 5vw, 28px);
  height:clamp(22px, 5vw, 30px);
  background:radial-gradient(circle at 40% 30%, #ff6b6b 0%, #ff345f 60%);
  border-radius:50% 50% 46% 46%;
  box-shadow:0 4px 10px rgba(0,0,0,0.18);
  transform-origin:center center;
}

.strawberry::after{
  content:'';
  position:absolute;
  left:50%;
  top:-6px;
  transform:translateX(-50%) rotate(-18deg);
  width:clamp(12px, 3vw, 16px);
  height:clamp(7px, 2vw, 10px);
  background:linear-gradient(180deg,#66c36b,#2e8b3a);
  border-radius:6px 6px 4px 4px;
  box-shadow:0 2px 6px rgba(0,0,0,0.12);
}

.strawberry::before{
  content:'';
  position:absolute;
  left:30%;
  top:36%;
  width:3px;height:3px;background:rgba(255,255,255,0.6);border-radius:50%;box-shadow:6px 2px rgba(255,255,255,0.5), -4px 6px rgba(255,255,255,0.4)
}

/* Candle wish popup */
.candle-wish{
  background:linear-gradient(180deg,#fff7f9,#fff1f5);
  color:#7a1b3a;
  border-radius:12px;
  padding:8px 12px;
  font-weight:700;
  font-size:clamp(11px, 2.5vw, 14px);
  box-shadow:0 8px 24px rgba(0,0,0,0.12);
  opacity:0;
  transform-origin:center bottom;
  transition:opacity .28s ease, transform .4s cubic-bezier(.2,.9,.2,1);
  z-index:99999;
  white-space:normal;
  word-wrap:break-word;
  max-width:150px;
}

.candle-wish.show{
  opacity:1;
  transform:translate(-50%,-180%) scale(1);
}

@keyframes wishFloat{
  0%{transform:translateY(0) scale(1);opacity:0}
  10%{opacity:1}
  70%{transform:translateY(-18px) scale(1.03);opacity:1}
  100%{transform:translateY(-44px) scale(0.98);opacity:0}
}

.candle-wish.show{
  animation:wishFloat 2.6s ease forwards;
}

.candles-holder{
  position:absolute;
  top:20px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:clamp(10px, 2vw, 15px);
  justify-content:center;
  width:90%;
  z-index:10;
}

.candle{
  width:clamp(10px, 3vw, 14px);
  height:clamp(28px, 8vw, 40px);
  background:linear-gradient(180deg,#FFFACD 0%,#FFE4B5 100%);
  border-radius:4px;
  position:relative;
  cursor:pointer;
  transition:all 0.3s;
  box-shadow:0 2px 8px rgba(0,0,0,0.2);
}

.candle:hover{
  transform:scale(1.1);
}

.candle.blown{
  opacity:0.6;
  background:linear-gradient(180deg,#D3D3D3 0%,#A9A9A9 100%);
}

.candle .wick{
  position:absolute;
  top:0;
  left:50%;
  transform:translateX(-50%);
  width:2px;
  height:6px;
  background:#333;
  border-radius:1px;
}

.candle .flame{
  position:absolute;
  top:clamp(-6px, -2vw, -8px);
  left:50%;
  transform:translateX(-50%);
  font-size:clamp(12px, 3vw, 16px);
  animation:flicker 0.6s ease-in-out infinite;
}

.candle.blown .flame{
  display:none;
}

@keyframes flicker{0%,100%{transform:translateX(-50%) scale(1)}50%{transform:translateX(-50%) scale(1.1)}}

/* Celebration elements */
.big-balloon{
  position:fixed;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  width:clamp(160px, 40vw, 200px);
  height:clamp(160px, 40vw, 200px);
  background:linear-gradient(135deg,#FF69B4 0%,#FF1493 100%);
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  color:#fff;
  font-size:clamp(20px, 5vw, 32px);
  font-weight:700;
  box-shadow:0 20px 60px rgba(255,20,147,0.4);
  z-index:9999;
  animation:balloonAppear 0.4s ease-out;
  padding:15px;
  text-align:center;
  word-wrap:break-word;
}

@keyframes balloonAppear{0%{transform:translate(-50%,-50%) scale(0.3);opacity:0}100%{transform:translate(-50%,-50%) scale(1);opacity:1}}

.big-balloon.pop{
  animation:balloonPop 0.5s ease-out forwards;
}

@keyframes balloonPop{0%{transform:translate(-50%,-50%) scale(1);opacity:1}50%{transform:translate(-50%,-50%) scale(1.1)}100%{transform:translate(-50%,-50%) scale(0.1);opacity:0}}

.joy-balloon{
  position:fixed;
  width:clamp(30px, 6vw, 40px);
  height:clamp(40px, 8vw, 50px);
  border-radius:50% 50% 50% 0;
  box-shadow:0 4px 15px rgba(0,0,0,0.2);
}

.overlay-blur{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0);
  backdrop-filter:blur(0px);
  z-index:9995;
  transition:all 0.4s ease;
}

.overlay-blur.active{
  background:rgba(0,0,0,0.3);
  backdrop-filter:blur(4px);
}

.celebration-text{
  position:fixed;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%) scale(0.9);
  z-index:10050;
  color:#fff;
  font-weight:700;
  font-size:clamp(14px, 3.5vw, 20px);
  line-height:1.6;
  text-align:center;
  text-shadow:0 8px 24px rgba(0,0,0,0.45);
  opacity:0;
  transition:opacity .35s, transform .35s;
  max-width:90%;
  padding:clamp(15px, 4vw, 28px);
  background:linear-gradient(180deg, rgba(0,0,0,0.45), rgba(0,0,0,0.3));
  border-radius:12px;
  word-wrap:break-word;
}

.celebration-text.show{
  opacity:1;
  transform:translate(-50%,-50%) scale(1);
}

.love-message{
}

.love-message p{
  margin:0;
  color:#5a2d4a;
  line-height:1.6;
  font-size:clamp(12px, 3vw, 14px);
  font-weight:500;
  word-wrap:break-word;
}

.message-content{
  position:relative;
  margin:12px 0;
  padding:clamp(15px, 4vw, 30px);
  background:linear-gradient(135deg,rgba(255,122,162,0.12),rgba(255,182,209,0.06));
  border-radius:16px;
  border:1px solid rgba(255,122,162,0.18);
  text-align:left;
  max-width:820px;
}

.message-content h2{
  font-size:clamp(20px, 5vw, 28px);
  margin:0 0 10px;
  color:var(--deep);
  word-wrap:break-word;
}

.message-body p{
  margin:0 0 12px;
  color:#3b1730;
  line-height:1.7;
  font-size:clamp(14px, 3.5vw, 18px);
  word-wrap:break-word;
}

.message-content.reveal{
  animation:messageReveal 700ms cubic-bezier(.2,.9,.2,1) forwards;
}

@keyframes messageReveal{0%{opacity:0;transform:translateY(20px) scale(0.98)}100%{opacity:1;transform:translateY(0) scale(1)}}

.hearts-container{
  position:relative;
  display:flex;
  justify-content:center;
  gap:12px;
  margin-bottom:8px;
  height:28px;
}

.flying-heart{
  position:absolute;
  font-size:clamp(14px, 4vw, 16px);
  animation:flutter-heart 4s ease-in-out infinite;
}

.flying-heart:nth-child(1){animation-delay:0s;left:5%}
.flying-heart:nth-child(2){animation-delay:0.6s;left:20%}
.flying-heart:nth-child(3){animation-delay:1.2s;left:40%}
.flying-heart:nth-child(4){animation-delay:1.8s;left:60%}
.flying-heart:nth-child(5){animation-delay:2.4s;left:80%}

@keyframes flutter-heart{0%{transform:translateY(0) scale(1);opacity:0}15%{opacity:1}85%{opacity:1}100%{transform:translateY(-80px) scale(1.2);opacity:0}}

/* Extra responsive adjustments for very small screens */
@media (max-width:480px){
  body{
    padding:3px;
  }
  .diary-container{
    padding:0 3px;
    min-height:400px;
  }
  .diary-page{
    height:auto;
    max-height:85vh;
  }
  .page-inner{
    padding:12px;
    gap:10px;
  }
  .cover-inner{
    padding:15px 10px;
    min-height:400px;
  }
  .cover-decoration{
    font-size:20px;
    max-width:50px;
  }
  .diary-nav{
    flex-direction:column;
    gap:8px;
    margin-top:10px;
  }
  .page-btn{
    width:100%;
    padding:8px 12px;
  }
  #page-counter{
    order:2;
    width:100%;
    text-align:center;
    margin-top:8px;
  }
  .modal-content{
    padding:12px;
    width:95%;
  }
  .celebration-text{
    padding:12px 15px;
    max-width:95%;
  }
}

@media (max-width:600px){
  .card h1{
    font-size:clamp(18px, 5vw, 24px);
  }
  .stage{
    min-height:200px;
    max-height:280px;
  }
  .love-message p{
    font-size:clamp(12px, 3vw, 14px);
  }
  .flying-heart{
    font-size:clamp(12px, 3vw, 16px);
  }
}
